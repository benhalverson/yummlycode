<!doctype html>
<html>
<head>
  <style>
    body {
      font-family: Raleway, Roboto, Helvetica Neue, Segoe UI, sans-serif
    }

    .name {
      color: #ffffff;
    }
    li {
      font-weight: bold;
    }

    li.recipe {
      background: #336598;
      width: 215px;
      list-style-type: none;
      position: relative;
      left: -39px;
      margin-bottom: 8px;
      height: 150px;
    }

    ul.ingredients {
      list-style-type: none;
      color:#336598;
    }

    .calories,
    .ingredients {
      display: none;
    }

    .show {
      display: block;
      position: absolute;
      top: 0;
      width: 232px;
      padding: 13px;
      left: 214px;
      margin: 0px;
      line-height: 1.5em;
      box-shadow: inset 0 0 10px #000000;
    }

    .amount {
    padding-right: 5px;
    font-weight: normal;
    }
    
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", (event) => {
      // caching classes into constants.
      // gets the recipe name
      const recipeName = document.querySelectorAll('.name');
      
      // gets the recipe data-id
      // recipe name and id are needed for building the url

      const recipeID = document.querySelectorAll('.recipe');
      const ID = recipeID //.getAttribute('data-id');

      // gets the ingredients list
      const showIngredients = document.querySelectorAll('.ingredients.li');
      // const showIngredients = document.querySelectorAll('.recipe').getElementsByClassName('ingredients');
      console.log(showIngredients);
      // The blue area is used to toggle the showing and hiding of the ingredients list
      const blueArea = document.querySelector('.recipe');
      // const ingredients = blueArea.getElementsByTagName('ul');
      blueArea.addEventListener('click', openIngredientsList);
      /*
      * toggle will either show or hide the ingredientsList of each bluebox.
      */
      function toggle() {
        const ingredientsList = blueArea.getElementsByTagName('ul');
        if (!ingredientsList[0].classList.contains('show')) {
          ingredientsList[0].classList.add('show');
        } else {
          ingredientsList[0].classList.remove('show');
        }
      }
      ingredients = blueArea.getElementsByClassName('li');
      
      

      function openIngredientsList() {
        // find all the ingredients and loop over them
        // show the list of ingredients and position to the right of the blue div

      const list = document.querySelector('.recipe').getElementsByClassName('ingredients');
      
      
      let arr = Array.from(list);
      arr.map((item) => {
        return console.log('item', item.children.length);
      });
      toggle();

      // buildRecipeNameURL();
      }


      function buildRecipeNameURL() {
        /*
        * sample url
        * https://www.yummly.com/recipe/Grilled-Shrimp-Tacos-1102925
        */
        const recipeTitle = recipeName.forEach((text) => {

          let title = text.innerText.split(' ').join('-')

          console.log('arr', arr);
          // const ID = recipeID.dataset.id;
          // console.log(ID);
          // const URL = `//yummly.com/recipe/${title}-${ID}`
          // console.log(URL);
          const ID = recipeID.forEach((item) => {
            let dataID = item.dataset.id;

            let URL = `//yummly.com/recipe/${title}-${dataID}`
            // window.open(URL);
          })

        });
      }
      

      function searchByIngredients(e) {
        console.log('searching...')
        /*
        * sample url 
        * https://www.yummly.com/recipes?allowedIngredient=ghee
        */
        const recipeID = document.querySelectorAll('[data-id]');
            recipeID.forEach((el) => {
            console.log('element', el.dataset.id);
    
          })


      }

      /*
      For adding class:
      
      document.getElementById("div1").classList.add("classToBeAdded");
      For removing class:
      
      document.getElementById("div1").classList.remove("classToBeRemoved");
      */
      // add event listeners
      // blueArea.forEach((element) => {
      //   element.addEventListener('click', buildRecipeNameURL);
      // });

      // recipeName.forEach((element) => {
      // element.addEventListener('click', buildRecipeNameURL)
      // element.addEventListener('click', recipeID)
      // });
      showIngredients.forEach((element) => {
        element.addEventListener('click', searchByIngredients);
      });

      document.addEventListener('click', () => {
        console.log('hello');
      });


    }); 
  </script>
</head>
<!-- only modify content inside the STYLE and SCRIPT elements above this line -->

<!-- please DO NOT modify anything below this line -->
<body>
  <button class="sort" data-order="random">Randomize</button>
  <button class="sort" data-order="name">Sort by Name</button>
  <button class="sort" data-order="calories">Sort by Calories</button>
  <div>
    <ul>
      <li class="recipe" data-id="309501">
        <span class="calories">140</span>
        <span class="name">Roasted cabbage with lemon</span>
        <ul class="ingredients">
          <li><span class="amount">1</span>green cabbage</li>
          <li><span class="amount">2 tbsp</span>olive oil</li>
          <li><span class="amount">3 tbsp</span>lemon juice</li>
          <li>salt</li>
          <li>freshly ground black pepper</li>
        </ul>
      </li>
      <li class="recipe" data-id="1102925">
        <span class="calories">270</span>
        <span class="name">Grilled Shrimp Tacos</span>
        <ul class="ingredients">
          <li><span class="amount">1 lb</span>shrimp</li>
          <li><span class="amount">1</span>avocado</li>
          <li><span class="amount">1 tbsp</span>olive oil</li>
          <li><span class="amount">1/2 tsp</span>chili powder</li>
          <li><span class="amount">1/2 tsp</span>ground cumin</li>
          <li><span class="amount">1/4 tsp</span>cayenne pepper</li>
          <li><span class="amount">8</span>corn tortillas</li>
          <li>lime wedge</li>
          <li>sour cream</li>
        </ul>
      </li>
      <li class="recipe" data-id="1312685">
        <span class="calories">480</span>
        <span class="name">Pan-Fried Pork Chops</span>
        <ul class="ingredients">
          <li><span class="amount">3</span>bone-in pork chops</li>
          <li><span class="amount">1/2 cup</span>coconut flour</li>
          <li><span class="amount">1 tsp</span>seasoning salt</li>
          <li><span class="amount">1 tsp</span>black pepper</li>
          <li><span class="amount">1 tbsp</span>butter</li>
        </ul>
      </li>
      <li class="recipe" data-id="2221642">
        <span class="calories">750</span>
        <span class="name">Baked Macaroni and Cheese</span>
        <ul class="ingredients">
          <li><span class="amount">2 cups</span>macaroni</li>
          <li><span class="amount">4 tbsp</span>margarine</li>
          <li><span class="amount">2 tbsp</span>flour</li>
          <li><span class="amount">3 cups</span>shredded cheddar cheese</li>
          <li><span class="amount">1 cup</span>milk</li>
          <li><span class="amount">1 tsp</span>salt</li>
        </ul>
      </li>
      <li class="recipe" data-id="772170">
        <span class="calories">300</span>
        <span class="name">Red Lentil Soup</span>
        <ul class="ingredients">
          <li><span class="amount">1 cup</span>red lentils</li>
          <li><span class="amount">2 cups</span>water</li>
          <li><span class="amount">1 whole</span>bay leaf</li>
          <li><span class="amount">1 tbsp</span>olive oil</li>
          <li><span class="amount">1</span>diced carrot</li>
          <li><span class="amount">2 stalks</span>diced celery</li>
          <li><span class="amount">2 tbsp</span>lemon juice</li>
          <li><span class="amount">1</span>yellow onion</li>
          <li><span class="amount">1/2 tsp</span>salt</li>
          <li><span class="amount">1/4 tsp</span>turmeric</li>
          <li><span class="amount">1/8 tsp</span>garam masala</li>
          <li><span class="amount">1 tbsp</span>fenugreek leaves</li>
          <li><span class="amount">5</span>cilantro stems</li>
          <li><span class="amount">1/8 tsp</span>cayenne pepper</li>
        </ul>
      </li>
      <li class="recipe" data-id="1309903">
        <span class="calories">60</span>
        <span class="name">Paneer Masala Dosa</span>
        <ul class="ingredients">
          <li><span class="amount">2 tbsp</span>ghee</li>
          <li><span class="amount">1/2 tsp</span>jeera</li>
          <li><span class="amount">1 sprig</span>curry leaves</li>
          <li><span class="amount">1</span>onion</li>
          <li><span class="amount">1</span>tomato</li>
          <li><span class="amount">1 tsp</span>garlic paste</li>
          <li><span class="amount">1 tsp</span>chili powder</li>
          <li><span class="amount">1/2 tsp</span>coriander powder</li>
          <li><span class="amount">1/4 tsp</span>ground cinnamon</li>
          <li><span class="amount">1 tsp</span>garam masala</li>
          <li><span class="amount">1 tsp</span>methi</li>
          <li><span class="amount">325 g</span>paneer</li>
          <li><span class="amount">15</span>cashew nuts</li>
          <li><span class="amount">1 tsp</span>fennel seeds</li>
        </ul>
      </li>
      <li class="recipe" data-id="356872">
        <span class="calories">230</span>
        <span class="name">Broccoli frittata</span>
        <ul class="ingredients">
          <li><span class="amount">3 cups</span>broccoli florets</li>
          <li><span class="amount">1 tbsp</span>butter</li>
          <li><span class="amount">1 tbsp</span>olive oil</li>
          <li><span class="amount">1 clove</span>minced garlic</li>
          <li><span class="amount">1</span>chopped onion</li>
          <li><span class="amount">1/2 tsp</span>chopped basil</li>
          <li><span class="amount">1/2 tsp</span>chopped parsley</li>
          <li><span class="amount">8</span>eggs</li>
          <li><span class="amount">2</span>egg whites</li>
          <li><span class="amount">1/2 cup</span>parmigiano reggiano cheese</li>
        </ul>
      </li>
    </ul>
  </div>
</body>

</html>